android detecting incoming outgoing calls: http://www.devlper.com/2010/08/detecting-incoming-and-outgoing-calls-in-android/
android programming record phone call: https://stackoverflow.com/questions/18887636/how-to-record-phone-calls-in-android
broadcastreceiver 2 calls : http://blog.mmarvick.com/blog/lollipop-multiple-broadcastreceiver-call-state/
android app forced stoped: https://android.stackexchange.com/questions/33801/what-does-the-force-stop-button-mean
huawei protected apps: https://stackoverflow.com/questions/31638986/protected-apps-setting-on-huawei-phones-and-how-to-handle-it
android emulator simulate outgoing phone call: https://stackoverflow.com/questions/20035650/make-calls-using-telnet-from-one-android-emulator-to-another


https://www.newventuresoftware.com/blog/record-play-and-visualize-raw-audio-data-in-android
https://medium.com/google-developers/migrating-mediastyle-notifications-to-support-android-o-29c7edeca9b7
https://www.laurivan.com/android-notifications-with-custom-layout/
https://stackoverflow.com/questions/5528288/how-do-i-update-the-notification-text-for-a-foreground-service-in-android
https://stackoverflow.com/questions/40068984/universal-way-to-write-to-external-sd-card-on-android
https://bitbucket.org/copluk/acr/issues/817/not-recording-on-android-7
https://ptyagicodecamp.github.io/requesting-audio-permission-at-runtime.html
https://stackoverflow.com/questions/2007024/push-my-apk-to-system-app/30340018#30340018
https://stackoverflow.com/questions/5481395/android-how-to-mount-filesystem-in-rw-from-within-my-apk-rooted-of-course
https://stackoverflow.com/questions/25360519/downloading-and-installing-an-application-in-the-system-app-on-a-un-rooted-devic
https://stackoverflow.com/questions/16058277/how-to-get-access-of-android-root-directory-system-app-programatically
https://omerjerk.in/index.php/2014/08/18/how-to-install-an-app-to-system-partition/
https://github.com/omerjerk/RemoteDroid/blob/master/app/src/main/java/in/omerjerk/remotedroid/app/MainActivity.java#L31
https://github.com/j4velin/SystemAppMover/blob/master/src/main/java/de/j4velin/systemappmover/AppClickListener.java
https://stackoverflow.com/questions/5095234/how-to-get-root-access-on-android-emulator

https://android.stackexchange.com/questions/171442/root-android-virtual-device-with-android-7-1-1
https://stackoverflow.com/questions/25274296/adb-install-fails-with-install-failed-test-only
https://stackoverflow.com/questions/24912067/cannot-install-package-on-rooted-device-install-failed-invalid-uri
https://android.stackexchange.com/questions/187620/app-installed-to-system-priv-app-wont-run

Permisiunea android.permission.CAPTURE_AUDIO_OUTPUT nu mai poate fi obținută de către aplicațiile obișnuite începînd cu marshmallow. Ca să primească permisiunea este nevoie ca una din două:
	- aplicația să fie instalată în /system
	- aplicația să fie semnată cu cheia sistemului.

1. Mutarea în /system:

Android 4, 5: (https://omerjerk.in/index.php/2014/08/18/how-to-install-an-app-to-system-partition/)
"cat %s > /system/priv-app/CallRecorder.apk.tmp\n" +
                   "chmod 644 /system/priv-app/CallRecorder.apk.tmp\n" +
                   "pm uninstall -k %s\n" +
                   "mv /system/priv-app/CallRecorder.apk.tmp /system/priv-app/CallRecorder.apk\n" +
                   "pm install -r /system/priv-app/CallRecorder.apk\n"

                   +
                   "sleep 5\n" +
                   "am start -n net.synapticweb.callrecorder/.CallRecorderMainActivity\n"

Android 6: (https://android.stackexchange.com/questions/187620/app-installed-to-system-priv-app-wont-run)
     "mount -o rw,remount /system\n" +
                   "mkdir /system/priv-app/CallRecorder\n" +
                   "cp  /data/app/net.synapticweb.callrecorder-1/base.apk /system/priv-app/CallRecorder/CallRecorder.apk\n" +
                   "cp /data/app/net.synapticweb.callrecorder-1/split_lib*  /system/priv-app/CallRecorder\n" +
                   "cp -r /data/app/net.synapticweb.callrecorder-1/oat /system/priv-app/CallRecorder\n" +
                   "mv /system/priv-app/CallRecorder/oat/x86/base.odex /system/priv-app/CallRecorder/oat/x86/CallRecorder.odex" +
                   "chown -R root:root /system/priv-app/CallRecorder\n" +
                   "chmod 0755 /system/priv-app/CallRecorder /system/priv-app/CallRecorder/oat /system/priv-app/CallRecorder/oat/x86\n" +
                   "chmod 0644 /system/priv-app/CallRecorder/*.apk /system/priv-app/CallRecorder/oat/x86/CallRecorder.odex\n" +
                   "rm -rf  /data/app/net.synapticweb.callrecorder-1\n"

Android 7,8:
 "mount -o rw,remount /system\n" +
                    "mkdir /system/priv-app/CallRecorder\n" +
                    "cp  /data/app/net.synapticweb.callrecorder-*/base.apk /system/priv-app/CallRecorder/CallRecorder.apk\n" +
                    "cp /data/app/net.synapticweb.callrecorder-*/split_lib*  /system/priv-app/CallRecorder\n" +
                    "cp -r /data/app/net.synapticweb.callrecorder-*/oat /system/priv-app/CallRecorder\n" +
                    "mv /system/priv-app/CallRecorder/oat/x86/base.odex /system/priv-app/CallRecorder/oat/x86/CallRecorder.odex" +
                    "mv /system/priv-app/CallRecorder/oat/x86/base.vdex /system/priv-app/CallRecorder/oat/x86/CallRecorder.vdex" +
                    "chown -R root:root /system/priv-app/CallRecorder\n" +
                    "chmod 0755 /system/priv-app/CallRecorder /system/priv-app/CallRecorder/oat /system/priv-app/CallRecorder/oat/x86\n" +
                    "chmod 0644 /system/priv-app/CallRecorder/*.apk /system/priv-app/CallRecorder/oat/x86/CallRecorder.odex /system/priv-app/CallRecorder/oat/x86/CallRecorder.vdex\n" +
                    "rm -rf  /data/app/net.synapticweb.callrecorder-*\n"                 

Scripturile pentru 6,7,8 au fost testate pe emulatoare ganymotion care au busybox instalat. Trebuie văzut dacă depinde de asta. Odată făcută app de sistem, dacă are permisiunea setată în manifest va primi permisiunea. 

2. Pentru semnarea cu cheia sistemului:
	- în manifest trebuie declarată permisiunea + android:sharedUserId="android.uid.system" în <manifest> (http://www.cnblogs.com/CoderTian/p/5971595.html)
	- apoi se semnează apk-ul conform: https://stackoverflow.com/questions/37586255/signing-my-android-application-as-system-app
